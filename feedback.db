import sqlite3
from contextlib import closing

# Define database file path
DB_FILE = 'feedback.db'

def create_feedback_table():
    with sqlite3.connect(DB_FILE) as conn:
        with closing(conn.cursor()) as c:
            # Create feedback table if not exists
            c.execute('''CREATE TABLE IF NOT EXISTS feedback
                         (Name TEXT, Email TEXT, Message TEXT)''')

def save_feedback_to_database(name, email, message):
    with sqlite3.connect(DB_FILE) as conn:
        with closing(conn.cursor()) as c:
            # Insert feedback data into the database
            c.execute("INSERT INTO feedback (Name, Email, Message) VALUES (?, ?, ?)", (name, email, message))

def get_feedback_data():
    with sqlite3.connect(DB_FILE) as conn:
        with closing(conn.cursor()) as c:
            c.execute("SELECT * FROM feedback")
            return c.fetchall()

# Create the feedback table if not already exists
create_feedback_table()
